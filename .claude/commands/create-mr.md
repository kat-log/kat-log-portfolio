---
description: 対話的にマージリクエスト（プルリクエスト）を作成する
---

# マージリクエスト作成

## 1. 現在のブランチ情報の確認

現在のブランチ:
!git branch --show-current

現在のブランチの状態:
!git status --porcelain

## 2. コミット履歴の確認

現在のブランチの最新 5 件のコミット:
!git log --oneline -5

main ブランチとの差分確認:
!git log main..HEAD --oneline

## 3. 変更内容の確認

main ブランチとの差分統計:
!git diff main --stat

## 4. マージ先ブランチの確認

**マージ先は「main」ブランチでよろしいですか？**

- `Y` / `y` / `yes` → main ブランチにマージリクエスト作成
- 別のブランチ名を入力 → 指定ブランチにマージリクエスト作成
- `N` / `n` / `no` → キャンセル

## 実行手順

上記の情報を確認した後、以下の手順で進めてください：

### A. ユーザーへの確認

1. 現在のブランチ名を表示
2. main ブランチとの差分があることを確認
3. 「マージ先は main ブランチでよろしいですか？」と質問
4. ユーザーの回答を待つ

### B. 回答に応じた処理

**Y/y/Enter の場合:**

```bash
# プルリクエスト作成（mainブランチ向け）
gh pr create --base main --title "適切なタイトル" --body "変更内容の説明"
```

**別のブランチ名が指定された場合:**

```bash
# プルリクエスト作成（指定ブランチ向け）
gh pr create --base [指定ブランチ名] --title "適切なタイトル" --body "変更内容の説明"
```

**N/n/No の場合:**

- 「マージリクエストの作成をキャンセルしました」と表示
- 処理を終了

### C. プルリクエストのタイトルとボディ生成

- コミットメッセージとブランチ名から適切なタイトルを生成
- 変更ファイルと差分統計を含むボディを作成
- 過去のコミット履歴も参考に含める

### D. 作成後の確認

- プルリクエストの URL を表示
- 作成されたプルリクエストの概要を表示

**重要な注意事項:**

- リモートブランチにプッシュされていない場合は先にプッシュする
- GitHub CLI (`gh`) が利用可能であることを確認
- プルリクエスト作成前に変更内容をユーザーに確認してもらう
